import{p as I,a4 as g,ao as E,s as R,y as $,aL as F,o as c,f as _,w as a,b as t,a as b,t as i,u as o,aM as d,bb as M,d as u,c as x,F as V,l as S,k as P,ar as C}from"./index-CdBy1DAC.js";import{d as k}from"./amountHelper-DpIpIitT.js";import{d as U,C as m,a as j}from"./dbContext-BF5vDBMi.js";import{e as q,c as w,a as A,b as N,g as z}from"./injection-BTu2Ks4h.js";import{e as v}from"./eventBus-E5P-NQ8u.js";import{V as G,a as H}from"./VRow-CPz841Jz.js";const J={exchange(p,r){return{amount:p.amount,currency:r}}},K={class:"text-h4 font-weight-regular"},te=I({__name:"ListPage",async setup(p){let r,f;g({title:"帳戶管理"});const y=z();let l=g(([r,f]=E(()=>y.getAllAsync()),r=await r,f(),r));async function h(){l.value=await y.getAllAsync()}async function L(){console.log(await C.push("/account/add"))}async function T(n){console.log(await C.push(`/account/edit/${n.id}`))}const B=R(()=>{var n=l.value.map(e=>e.currency==m.NTD?e.balance:J.exchange({amount:e.balance,currency:e.currency},m.NTD).amount);return n.length==0?0:n.reduce((e,s)=>Number(e)+Number(s))});return $(()=>v.on("any-record-change",h)),F(()=>v.off("any-record-change",h)),(n,e)=>(c(),_(j,{elevation:"10"},{default:a(()=>[t(U,{class:"py-4 px-6 text-white bg-primary"},{default:a(()=>[t(G,null,{default:a(()=>[t(H,null,{default:a(()=>[e[1]||(e[1]=b("h2",{class:"text-h5"},"總資產",-1)),b("h2",K,i(o(k)(B.value,o(m).NTD)),1)]),_:1})]),_:1})]),_:1}),t(d,{class:"border-opacity-75"}),t(q,null,{default:a(()=>[t(w,{class:"py-3 opacity-50",onClick:e[0]||(e[0]=s=>L())},{default:a(()=>[t(A,{class:"text-subtitle-1"},{default:a(()=>[t(M,{icon:"mdi-plus"}),e[2]||(e[2]=u(" 點擊新增"))]),_:1})]),_:1}),t(d,{class:"border-opacity-75"}),(c(!0),x(V,null,S(o(l),(s,D)=>(c(),x(V,{key:s.id},[t(w,{color:"primary",class:"py-3",onClick:O=>T(s)},{append:a(()=>[t(N,{class:"text-subtitle-1 text-high-emphasis mr-3"},{default:a(()=>[u(i(o(k)(s.balance,s.currency)),1)]),_:2},1024)]),default:a(()=>[t(A,{class:"text-subtitle-1"},{default:a(()=>[u(i(s.name),1)]),_:2},1024),t(N,{class:"text-subtitle-2 text-high-emphasis"},{default:a(()=>[u(i(s.memo),1)]),_:2},1024)]),_:2},1032,["onClick"]),D+1!=o(l).length?(c(),_(d,{key:0,class:"border-opacity-75"})):P("",!0)],64))),128))]),_:1})]),_:1}))}});export{te as default};
